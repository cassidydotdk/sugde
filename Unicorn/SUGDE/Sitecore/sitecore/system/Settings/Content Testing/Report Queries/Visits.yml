---
ID: "de779ee6-c6b8-4f1f-9012-f46c1e5d87fe"
Parent: "696fac52-92b8-4ff0-9f9e-e8b997110469"
Template: "a90f48c4-4d4f-41d7-8497-070a9a50304e"
Path: /sitecore/system/Settings/Content Testing/Report Queries/Visits
DB: master
SharedFields:
- ID: "72b1c86f-ae19-4534-abcf-0692378d41cf"
  Hint: Data Source
  Value: reporting
- ID: "a61cc636-3272-4fb6-bcf9-762940047a78"
  Hint: Query
  Value: |
    DECLARE
    	@LanguageCode int = null,
    	@DeviceCode int = null
    	
    IF @LanguageName != ''
    BEGIN
    	SELECT @LanguageCode = LanguageId
    	FROM [Languages]
    	WHERE Name = @LanguageName
    END
    
    IF @DeviceName != ''
    BEGIN
    	SELECT @DeviceCode = DeviceNameId
    	FROM [DeviceNames]
    	WHERE DeviceName = @DeviceName
    END
    
    SELECT
    	SUM([Visits]) AS [Visits]
    FROM
    	dbo.[Fact_PageViewsByLanguage]
    WHERE
    	[ItemId] = @ItemId 
    	AND [LanguageId] = COALESCE(@LanguageCode, LanguageId)
    	AND [DeviceNameId] = COALESCE(@DeviceCode, DeviceNameId)
    	AND [Date] >= @Start 
    	AND [Date] <= @End
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20140424T222828
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
